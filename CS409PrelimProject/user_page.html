<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crownwell University</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="portalStyle.css" />
  </head>

  <body>
    <header>
      <div class="header-container">
        <div class="logo-container">
          <img src="2.png" alt="Crownwell UNIVERSITY Logo" class="logo" />
          <h2>CROWNWELL UNIVERSITY</h2>
        </div>
      </div>
    </header>

    <main>
      <!--Home Tab-->
      <section id="home" class="tab-content active">
        <div class="hero">
          <h2>Crownwell Compass</h2>
          <p>1st Semester Year 2025-2026</p>
        </div>

        <div class="student-profile">
          <div class="card">
            <div class="profile-container">
              <div class="profile-info">
                <h3><i class=""></i> Student Information</h3>
                <h1 id="userName"></h1>
                <p id="userProgram"></p>
                <p id="userEmail"></p>
                <p id="userBirthday"></p>
                <p id="userGWA"></p>
                <p id="userGuardian"></p>
                <br /><br />
                <button class="logout-btn" onclick="logout()">Logout</button>
              </div>
              <div class="profile-pic">
                <img id="userPicture" alt="Profile Picture" />
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      // Get logged-in user from localStorage
      const user = JSON.parse(localStorage.getItem("loggedInUser") || "{}");

      // Redirect to login if not logged in
      if (!user.email) {
        window.location.href = "index.html";
      }

      // Calculate age
      const birthDate = new Date(user.birthday);
      const today = new Date();
      let age = today.getFullYear() - birthDate.getFullYear();
      const m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;

      // Populate info
      document.getElementById(
        "userName"
      ).textContent = `Welcome, ${user.name}!`;
      document.getElementById(
        "userProgram"
      ).textContent = `Program: ${user.program}`;
      document.getElementById("userEmail").textContent = `Email: ${user.email}`;
      document.getElementById(
        "userBirthday"
      ).textContent = `Birthday: ${user.birthday} (Age: ${age})`;
      document.getElementById("userGWA").textContent = `GWA: ${user.gwa}`;
      document.getElementById(
        "userGuardian"
      ).textContent = `Guardian: ${user.guardian} (${user.guardianPhone})`;
      document.getElementById("userPicture").src = user.picture;

      // Logout function
      function logout() {
        localStorage.removeItem("loggedInUser");
        window.location.href = "school.html";
      }
    </script>
  </body>
</html>
